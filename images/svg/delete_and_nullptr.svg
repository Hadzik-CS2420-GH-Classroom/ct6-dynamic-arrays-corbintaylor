<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 820 620" font-family="Consolas, 'Courier New', monospace" font-size="14">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333"/>
    </marker>
    <marker id="arrow-red" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#dc3545"/>
    </marker>
    <marker id="arrow-green" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#28a745"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="820" height="620" fill="#1e1e1e" rx="8"/>

  <!-- Title -->
  <text x="410" y="35" text-anchor="middle" fill="#569cd6" font-size="18" font-weight="bold">delete[] and nullptr — What Happens to the Pointer?</text>

  <!-- ============ STEP 1: Before delete[] ============ -->
  <text x="30" y="75" fill="#6a9955" font-size="15" font-weight="bold">Step 1: Before delete[]</text>
  <text x="30" y="95" fill="#608b4e" font-size="12">int* heapArray = new int[4];</text>

  <!-- Stack box -->
  <rect x="30" y="110" width="190" height="50" rx="4" fill="#2d2d2d" stroke="#569cd6" stroke-width="2"/>
  <text x="40" y="130" fill="#9cdcfe" font-size="13">heapArray</text>
  <text x="40" y="148" fill="#ce9178" font-size="12">0x7A00</text>
  <text x="170" y="118" fill="#569cd6" font-size="10">STACK</text>

  <!-- Arrow to heap -->
  <line x1="220" y1="135" x2="280" y2="135" stroke="#569cd6" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- Heap array -->
  <rect x="290" y="110" width="80" height="50" rx="4" fill="#2d2d2d" stroke="#4ec9b0" stroke-width="2"/>
  <rect x="370" y="110" width="80" height="50" rx="4" fill="#2d2d2d" stroke="#4ec9b0" stroke-width="2"/>
  <rect x="450" y="110" width="80" height="50" rx="4" fill="#2d2d2d" stroke="#4ec9b0" stroke-width="2"/>
  <rect x="530" y="110" width="80" height="50" rx="4" fill="#2d2d2d" stroke="#4ec9b0" stroke-width="2"/>

  <text x="330" y="130" text-anchor="middle" fill="#b5cea8" font-size="13">10</text>
  <text x="330" y="148" text-anchor="middle" fill="#ce9178" font-size="10">0x7A00</text>
  <text x="410" y="130" text-anchor="middle" fill="#b5cea8" font-size="13">20</text>
  <text x="410" y="148" text-anchor="middle" fill="#ce9178" font-size="10">0x7A04</text>
  <text x="490" y="130" text-anchor="middle" fill="#b5cea8" font-size="13">30</text>
  <text x="490" y="148" text-anchor="middle" fill="#ce9178" font-size="10">0x7A08</text>
  <text x="570" y="130" text-anchor="middle" fill="#b5cea8" font-size="13">40</text>
  <text x="570" y="148" text-anchor="middle" fill="#ce9178" font-size="10">0x7A0C</text>

  <text x="450" y="118" fill="#4ec9b0" font-size="10">HEAP</text>

  <!-- Status: valid -->
  <rect x="650" y="115" width="140" height="38" rx="15" fill="#28a74522" stroke="#28a745" stroke-width="1.5"/>
  <text x="720" y="139" text-anchor="middle" fill="#28a745" font-size="13" font-weight="bold">✓ Valid pointer</text>

  <!-- ============ STEP 2: After delete[] ============ -->
  <text x="30" y="205" fill="#d7ba7d" font-size="15" font-weight="bold">Step 2: After delete[] heapArray;</text>
  <text x="30" y="225" fill="#608b4e" font-size="12">Memory returned to OS — but pointer unchanged!</text>

  <!-- Stack box -->
  <rect x="30" y="240" width="190" height="50" rx="4" fill="#2d2d2d" stroke="#dc3545" stroke-width="2"/>
  <text x="40" y="260" fill="#9cdcfe" font-size="13">heapArray</text>
  <text x="40" y="278" fill="#ce9178" font-size="12">0x7A00</text>
  <text x="120" y="248" fill="#dc3545" font-size="10">STILL POINTS HERE!</text>

  <!-- Dangling arrow -->
  <line x1="220" y1="265" x2="280" y2="265" stroke="#dc3545" stroke-width="2" stroke-dasharray="6,3" marker-end="url(#arrow-red)"/>

  <!-- Freed heap (X'd out) -->
  <rect x="290" y="240" width="80" height="50" rx="4" fill="#3d2020" stroke="#dc354580" stroke-width="2" stroke-dasharray="4,2"/>
  <rect x="370" y="240" width="80" height="50" rx="4" fill="#3d2020" stroke="#dc354580" stroke-width="2" stroke-dasharray="4,2"/>
  <rect x="450" y="240" width="80" height="50" rx="4" fill="#3d2020" stroke="#dc354580" stroke-width="2" stroke-dasharray="4,2"/>
  <rect x="530" y="240" width="80" height="50" rx="4" fill="#3d2020" stroke="#dc354580" stroke-width="2" stroke-dasharray="4,2"/>

  <text x="330" y="270" text-anchor="middle" fill="#dc354580" font-size="18" font-weight="bold">✕</text>
  <text x="410" y="270" text-anchor="middle" fill="#dc354580" font-size="18" font-weight="bold">✕</text>
  <text x="490" y="270" text-anchor="middle" fill="#dc354580" font-size="18" font-weight="bold">✕</text>
  <text x="570" y="270" text-anchor="middle" fill="#dc354580" font-size="18" font-weight="bold">✕</text>

  <text x="450" y="248" fill="#dc354580" font-size="10">FREED — DO NOT ACCESS</text>

  <!-- Status: dangling -->
  <rect x="640" y="242" width="160" height="44" rx="15" fill="#dc354522" stroke="#dc3545" stroke-width="1.5"/>
  <text x="720" y="260" text-anchor="middle" fill="#dc3545" font-size="12" font-weight="bold">⚠ Dangling pointer</text>
  <text x="720" y="277" text-anchor="middle" fill="#dc354599" font-size="10">Undefined behavior!</text>

  <!-- Warning callout -->
  <rect x="50" y="305" width="720" height="65" rx="6" fill="#dc354515" stroke="#dc3545" stroke-width="1" stroke-dasharray="4,2"/>
  <text x="70" y="325" fill="#dc3545" font-size="13" font-weight="bold">⚠  The danger zone:</text>
  <text x="70" y="345" fill="#d4d4d4" font-size="12">heapArray still holds address 0x7A00 — it LOOKS valid. But that memory has been freed.</text>
  <text x="70" y="362" fill="#d4d4d4" font-size="12">Using *heapArray or heapArray[0] now is <tspan fill="#dc3545" font-weight="bold">undefined behavior</tspan> — it might crash, return garbage, or seem to "work."</text>

  <!-- ============ STEP 3: After arr = nullptr ============ -->
  <text x="30" y="410" fill="#4ec9b0" font-size="15" font-weight="bold">Step 3: heapArray = nullptr;</text>
  <text x="30" y="430" fill="#608b4e" font-size="12">Now the invalid state is visible and safe.</text>

  <!-- Stack box -->
  <rect x="30" y="445" width="190" height="50" rx="4" fill="#2d2d2d" stroke="#28a745" stroke-width="2"/>
  <text x="40" y="465" fill="#9cdcfe" font-size="13">heapArray</text>
  <text x="40" y="483" fill="#4ec9b0" font-size="13" font-weight="bold">nullptr</text>

  <!-- Ground symbol (nowhere) -->
  <line x1="220" y1="470" x2="260" y2="470" stroke="#555" stroke-width="2"/>
  <line x1="230" y1="477" x2="250" y2="477" stroke="#555" stroke-width="1.5"/>
  <line x1="236" y1="484" x2="244" y2="484" stroke="#555" stroke-width="1"/>

  <!-- Freed heap (gone) -->
  <rect x="290" y="445" width="320" height="50" rx="4" fill="#1e1e1e" stroke="#55555555" stroke-width="1" stroke-dasharray="4,2"/>
  <text x="450" y="475" text-anchor="middle" fill="#9da5b4" font-size="13" font-style="italic">memory returned to system</text>

  <!-- Status: safe -->
  <rect x="650" y="450" width="140" height="38" rx="15" fill="#28a74522" stroke="#28a745" stroke-width="1.5"/>
  <text x="720" y="474" text-anchor="middle" fill="#28a745" font-size="13" font-weight="bold">✓ Safe state</text>

  <!-- Bottom summary box -->
  <rect x="50" y="520" width="720" height="80" rx="6" fill="#28a74515" stroke="#28a745" stroke-width="1"/>
  <text x="70" y="545" fill="#28a745" font-size="13" font-weight="bold">✓  Why this matters:</text>
  <text x="70" y="565" fill="#d4d4d4" font-size="12">After setting to nullptr, you can safely check:  <tspan fill="#9cdcfe">if (heapArray != nullptr)</tspan> <tspan fill="#608b4e">{ /* safe to use */ }</tspan></text>
  <text x="70" y="585" fill="#d4d4d4" font-size="12">And <tspan fill="#9cdcfe">delete[] nullptr</tspan> is guaranteed to do nothing — no crash from accidental double-delete.</text>
</svg>
